# ORM/ODM

æ•°æ®åº“å¯¹è±¡å…³ç³»æ˜ å°„ï¼ˆORMï¼‰å’Œå¯¹è±¡æ–‡æ¡£æ˜ å°„ï¼ˆODMï¼‰å·¥å…·ï¼Œç”¨äºåœ¨åº”ç”¨ä»£ç å’Œæ•°æ®åº“ä¹‹é—´æä¾›æŠ½è±¡å±‚ã€‚

## ğŸ“š å­¦ä¹ è·¯å¾„

### ç¬¬ä¸€é˜¶æ®µï¼šPrisma æ ¸å¿ƒï¼ˆå¿…ä¿®ï¼‰

- [ ] **Prisma Schema**
  - [ ] æ•°æ®æ¨¡å‹å®šä¹‰
  - [ ] å…³ç³»æ˜ å°„ï¼ˆä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹å¤šï¼‰
  - [ ] å­—æ®µç±»å‹å’Œä¿®é¥°ç¬¦
  - [ ] ç´¢å¼•å’Œå”¯ä¸€çº¦æŸ

- [ ] **Prisma Client**
  - [ ] CRUD æ“ä½œ
  - [ ] å…³ç³»æŸ¥è¯¢ï¼ˆinclude vs selectï¼‰
  - [ ] è¿‡æ»¤å’Œæ’åº
  - [ ] åˆ†é¡µï¼ˆoffset vs cursorï¼‰
  - [ ] èšåˆæŸ¥è¯¢

- [ ] **é«˜çº§ç‰¹æ€§**
  - [ ] äº‹åŠ¡å¤„ç†
  - [ ] ä¸­é—´ä»¶
  - [ ] åŸå§‹æŸ¥è¯¢ï¼ˆ$queryRawï¼‰
  - [ ] æ‰¹é‡æ“ä½œ
  - [ ] è¿æ¥æ± é…ç½®

- [ ] **è¿ç§»å’Œéƒ¨ç½²**
  - [ ] Prisma Migrate
  - [ ] æ•°æ®å¡«å……ï¼ˆSeedingï¼‰
  - [ ] å¤šç¯å¢ƒé…ç½®

### ç¬¬äºŒé˜¶æ®µï¼šTypeORMï¼ˆæ·±å…¥ï¼‰

- [ ] **Entity å®šä¹‰**
  - [ ] è£…é¥°å™¨ä½¿ç”¨
  - [ ] å…³ç³»æ˜ å°„
  - [ ] çº§è”æ“ä½œ
  - [ ] ç›‘å¬å™¨å’Œè®¢é˜…è€…

- [ ] **Repository æ¨¡å¼**
  - [ ] åŸºç¡€ CRUD
  - [ ] æ¡ä»¶æŸ¥è¯¢
  - [ ] å…³ç³»åŠ è½½

- [ ] **Query Builder**
  - [ ] å¤æ‚æŸ¥è¯¢æ„å»º
  - [ ] JOIN æ“ä½œ
  - [ ] å­æŸ¥è¯¢
  - [ ] èšåˆå’Œåˆ†ç»„

- [ ] **äº‹åŠ¡å’Œè¿ç§»**
  - [ ] äº‹åŠ¡ç®¡ç†
  - [ ] è¿ç§»ç”Ÿæˆå’Œæ‰§è¡Œ

### ç¬¬ä¸‰é˜¶æ®µï¼šMongooseï¼ˆMongoDBï¼‰

- [ ] **Schema å®šä¹‰**
  - [ ] å­—æ®µç±»å‹å’ŒéªŒè¯
  - [ ] é»˜è®¤å€¼å’Œè‡ªåŠ¨ç”Ÿæˆ
  - [ ] åµŒå…¥æ–‡æ¡£ vs å¼•ç”¨æ–‡æ¡£

- [ ] **æŸ¥è¯¢æ“ä½œ**
  - [ ] åŸºç¡€ CRUD
  - [ ] æŸ¥è¯¢æ“ä½œç¬¦
  - [ ] Populationï¼ˆå…³è”æŸ¥è¯¢ï¼‰
  - [ ] èšåˆç®¡é“

- [ ] **é«˜çº§ç‰¹æ€§**
  - [ ] ä¸­é—´ä»¶ï¼ˆHooksï¼‰
  - [ ] è™šæ‹Ÿå±æ€§
  - [ ] å®ä¾‹æ–¹æ³•å’Œé™æ€æ–¹æ³•
  - [ ] æ’ä»¶ç³»ç»Ÿ

- [ ] **ç´¢å¼•å’Œæ€§èƒ½**
  - [ ] ç´¢å¼•ç±»å‹
  - [ ] æŸ¥è¯¢ä¼˜åŒ–
  - [ ] äº‹åŠ¡å¤„ç†

### ç¬¬å››é˜¶æ®µï¼šæ¡†æ¶å¯¹æ¯”ï¼ˆå¿…ä¼šï¼‰

- [ ] **æ€§èƒ½å¯¹æ¯”**
  - [ ] åŸºå‡†æµ‹è¯•ç»“æœ
  - [ ] å†…å­˜å ç”¨
  - [ ] æŸ¥è¯¢æ•ˆç‡

- [ ] **TypeScript æ”¯æŒ**
  - [ ] ç±»å‹æ¨æ–­
  - [ ] ç±»å‹å®‰å…¨ç¨‹åº¦
  - [ ] å¼€å‘ä½“éªŒ

- [ ] **åŠŸèƒ½å¯¹æ¯”**
  - [ ] å…³ç³»æŸ¥è¯¢
  - [ ] è¿ç§»ç³»ç»Ÿ
  - [ ] åŸç”Ÿ SQL æ”¯æŒ

- [ ] **é€‰å‹å†³ç­–**
  - [ ] æŒ‰é¡¹ç›®ç±»å‹é€‰æ‹©
  - [ ] æŒ‰å›¢é˜Ÿç»éªŒé€‰æ‹©
  - [ ] æŒ‰æ€§èƒ½è¦æ±‚é€‰æ‹©

## ğŸ“– æ¨¡å—å†…å®¹

### [01-prisma.md](./01-prisma.md)

Prisma æ˜¯æ–°ä¸€ä»£ TypeScript ORMï¼Œä»¥ç±»å‹å®‰å…¨å’Œæ€§èƒ½è‘—ç§°ã€‚

**æ ¸å¿ƒå†…å®¹**ï¼š
- Prisma Schema å®šä¹‰å’Œå…³ç³»æ˜ å°„
- Prisma Client çš„å®Œæ•´ä½¿ç”¨
- é«˜çº§æŸ¥è¯¢ï¼ˆincludeã€selectã€è¿‡æ»¤ï¼‰
- äº‹åŠ¡å¤„ç†ï¼ˆäº¤äº’å¼ vs é¡ºåºï¼‰
- ä¸­é—´ä»¶å®ç°ï¼ˆæ—¥å¿—ã€è½¯åˆ é™¤ã€åŠ å¯†ï¼‰
- è¿ç§»å’Œæ•°æ®å¡«å……
- æ€§èƒ½ä¼˜åŒ–ï¼ˆè¿æ¥æ± ã€æ‰¹é‡æ“ä½œã€DataLoaderï¼‰
- ä¸ NestJS é›†æˆ

**é¢è¯•é‡ç‚¹**ï¼š
- Prisma ä¼˜åŠ¿å’ŒåŠ£åŠ¿
- å¦‚ä½•é¿å… N+1 æŸ¥è¯¢
- äº‹åŠ¡éš”ç¦»çº§åˆ«
- è½¯åˆ é™¤å®ç°
- è¿æ¥æ± é…ç½®

### [02-typeorm.md](./02-typeorm.md)

TypeORM æ˜¯æˆç†Ÿçš„ TypeScript ORMï¼ŒåŠŸèƒ½ä¸°å¯Œï¼Œç¤¾åŒºå¼ºå¤§ã€‚

**æ ¸å¿ƒå†…å®¹**ï¼š
- Entity å®šä¹‰å’Œè£…é¥°å™¨
- å…³ç³»æ˜ å°„ï¼ˆä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹å¤šã€è‡ªå¼•ç”¨ï¼‰
- Repository æ¨¡å¼å’ŒåŸºç¡€æ“ä½œ
- Query Builder é«˜çº§ç”¨æ³•
- äº‹åŠ¡ç®¡ç†ï¼ˆ3 ç§æ–¹å¼ï¼‰
- ç›‘å¬å™¨å’Œè®¢é˜…è€…
- è¿ç§»ç”Ÿæˆå’Œæ‰§è¡Œ
- ä¸ NestJS é›†æˆ
- æ€§èƒ½ä¼˜åŒ–ï¼ˆæŸ¥è¯¢ã€æ‰¹é‡ã€ç¼“å­˜ã€ç´¢å¼•ï¼‰

**é¢è¯•é‡ç‚¹**ï¼š
- ç”Ÿå‘½å‘¨æœŸé’©å­
- æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
- çº§è”æ“ä½œ
- TypeORM vs Prisma

### [03-mongoose.md](./03-mongoose.md)

Mongoose æ˜¯ MongoDB çš„ ODMï¼Œæä¾› Schema éªŒè¯å’Œä¸°å¯Œçš„æŸ¥è¯¢ APIã€‚

**æ ¸å¿ƒå†…å®¹**ï¼š
- Schema å®šä¹‰å’Œæ•°æ®ç±»å‹
- å…³ç³»å’Œå¼•ç”¨ï¼ˆPopulationã€è™šæ‹Ÿå¡«å……ã€åµŒå…¥æ–‡æ¡£ï¼‰
- CRUD æ“ä½œå’ŒæŸ¥è¯¢æ“ä½œç¬¦
- èšåˆç®¡é“ï¼ˆ$matchã€$groupã€$lookupã€$facetï¼‰
- ä¸­é—´ä»¶ï¼ˆpre/post hooksï¼‰
- è™šæ‹Ÿå±æ€§
- å®ä¾‹æ–¹æ³•å’Œé™æ€æ–¹æ³•
- ç´¢å¼•ä¼˜åŒ–
- äº‹åŠ¡å¤„ç†
- ä¸ NestJS é›†æˆ

**é¢è¯•é‡ç‚¹**ï¼š
- populate åŸç†
- åµŒå…¥ vs å¼•ç”¨é€‰æ‹©
- ä¸­é—´ä»¶æ‰§è¡Œé¡ºåº
- èšåˆç®¡é“ä¼˜åŒ–

### [04-orm-comparison.md](./04-orm-comparison.md)

å…¨é¢å¯¹æ¯”ä¸»æµ ORM/ODMï¼Œæä¾›é€‰å‹å»ºè®®ã€‚

**æ ¸å¿ƒå†…å®¹**ï¼š
- Prismaã€TypeORMã€Sequelizeã€Mongooseã€Drizzle å¯¹æ¯”
- æ€§èƒ½åŸºå‡†æµ‹è¯•
- TypeScript æ”¯æŒå¯¹æ¯”
- å…³ç³»æŸ¥è¯¢å¯¹æ¯”
- è¿ç§»ç³»ç»Ÿå¯¹æ¯”
- é€‰å‹å»ºè®®ï¼ˆæŒ‰é¡¹ç›®ç±»å‹ã€å›¢é˜Ÿç»éªŒã€æ€§èƒ½è¦æ±‚ï¼‰

**é¢è¯•é‡ç‚¹**ï¼š
- ä¸ºä»€ä¹ˆ Prisma æ¯” TypeORM å¿«
- N+1 æŸ¥è¯¢é—®é¢˜è§£å†³
- åŸå§‹ SQL ä½¿ç”¨
- äº‹åŠ¡å¤„ç†å¯¹æ¯”

## ğŸ¯ é¢è¯•é«˜é¢‘é—®é¢˜

### 1. ORM çš„ä¼˜ç¼ºç‚¹ï¼Ÿ

**ä¼˜ç‚¹**ï¼š
- âœ… æŠ½è±¡æ•°æ®åº“æ“ä½œï¼Œæé«˜å¼€å‘æ•ˆç‡
- âœ… ç±»å‹å®‰å…¨ï¼Œå‡å°‘é”™è¯¯
- âœ… ä»£ç å¯ç»´æŠ¤æ€§é«˜
- âœ… æ•°æ®åº“è¿ç§»ç®¡ç†
- âœ… è·¨æ•°æ®åº“å…¼å®¹

**ç¼ºç‚¹**ï¼š
- âŒ æ€§èƒ½å¼€é”€ï¼ˆç›¸æ¯”åŸç”Ÿ SQLï¼‰
- âŒ å­¦ä¹ æ›²çº¿
- âŒ å¤æ‚æŸ¥è¯¢å¯èƒ½å›°éš¾
- âŒ æŠ½è±¡æ³„æ¼é—®é¢˜
- âŒ è°ƒè¯•å›°éš¾

**é€‚ç”¨åœºæ™¯**ï¼š
- ä¸­å°å‹é¡¹ç›®
- CRUD ä¸ºä¸»çš„åº”ç”¨
- å¿«é€Ÿå¼€å‘åŸå‹
- å›¢é˜Ÿä¸ç†Ÿæ‚‰ SQL

**ä¸é€‚ç”¨åœºæ™¯**ï¼š
- æè‡´æ€§èƒ½è¦æ±‚
- å¤æ‚æ•°æ®åˆ†æ
- å¤§é‡å¤æ‚ SQL
- æ•°æ®åº“ç‰¹å®šåŠŸèƒ½

### 2. å¦‚ä½•è§£å†³ N+1 æŸ¥è¯¢é—®é¢˜ï¼Ÿ

**é—®é¢˜ç¤ºä¾‹**ï¼š
```typescript
// âŒ N+1 é—®é¢˜
const users = await User.findAll();  // 1 query
for (const user of users) {
  user.posts = await Post.findAll({   // N queries
    where: { userId: user.id }
  });
}
// æ€»å…±ï¼š1 + N æ¬¡æŸ¥è¯¢
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. **é¢„åŠ è½½ï¼ˆEager Loadingï¼‰**ï¼š
```typescript
// Prisma
const users = await prisma.user.findMany({
  include: { posts: true }  // 1 query with JOIN
});

// TypeORM
const users = await userRepository.find({
  relations: ['posts']
});

// Mongoose
const users = await User.find().populate('posts');
```

2. **DataLoaderï¼ˆæ‰¹é‡åŠ è½½ï¼‰**ï¼š
```typescript
import DataLoader from 'dataloader';

const postLoader = new DataLoader(async (userIds) => {
  const posts = await Post.findAll({
    where: { userId: { in: userIds } }
  });
  // æŒ‰ userId åˆ†ç»„è¿”å›
  return userIds.map(id => 
    posts.filter(post => post.userId === id)
  );
});

// ä½¿ç”¨
const users = await User.findAll();
await Promise.all(
  users.map(async user => {
    user.posts = await postLoader.load(user.id);
  })
);
```

3. **ä½¿ç”¨èšåˆ/åŸç”ŸæŸ¥è¯¢**ï¼š
```typescript
// ä¸€æ¬¡æŸ¥è¯¢è·å–æ‰€æœ‰æ•°æ®
const result = await db.query(`
  SELECT u.*, p.*
  FROM users u
  LEFT JOIN posts p ON p.user_id = u.id
`);
```

### 3. Prisma vs TypeORM å¦‚ä½•é€‰æ‹©ï¼Ÿ

| ç»´åº¦ | Prisma | TypeORM |
|------|--------|---------|
| ç±»å‹å®‰å…¨ | â­â­â­â­â­ | â­â­â­ |
| æ€§èƒ½ | â­â­â­â­â­ | â­â­â­ |
| å­¦ä¹ æ›²çº¿ | â­â­â­â­ | â­â­â­ |
| çµæ´»æ€§ | â­â­â­ | â­â­â­â­â­ |
| ç¤¾åŒº | â­â­â­â­ | â­â­â­â­â­ |
| åŠŸèƒ½ä¸°å¯Œåº¦ | â­â­â­â­ | â­â­â­â­â­ |

**é€‰æ‹© Prisma**ï¼š
- æ–°é¡¹ç›®
- è¿½æ±‚ç±»å‹å®‰å…¨å’Œæ€§èƒ½
- éœ€è¦å¿«é€Ÿå¼€å‘
- å›¢é˜Ÿä¸ç†Ÿæ‚‰ SQL

**é€‰æ‹© TypeORM**ï¼š
- å·²æœ‰é¡¹ç›®
- éœ€è¦å¤æ‚ SQL
- å¤šæ•°æ®åº“æ”¯æŒ
- éœ€è¦é«˜åº¦çµæ´»æ€§

### 4. åµŒå…¥æ–‡æ¡£ vs å¼•ç”¨æ–‡æ¡£ï¼ˆMongoDBï¼‰ï¼Ÿ

**åµŒå…¥æ–‡æ¡£**ï¼š
```typescript
{
  _id: ObjectId("..."),
  name: "John",
  address: {
    street: "123 Main St",
    city: "New York"
  }
}
```

ä¼˜ç‚¹ï¼š
- âœ… ä¸€æ¬¡æŸ¥è¯¢è·å–æ‰€æœ‰æ•°æ®
- âœ… åŸå­æ€§æ›´æ–°
- âœ… æ€§èƒ½æ›´å¥½

ç¼ºç‚¹ï¼š
- âŒ æ–‡æ¡£å¤§å°é™åˆ¶ï¼ˆ16MBï¼‰
- âŒ æ•°æ®å¯èƒ½é‡å¤
- âŒ éš¾ä»¥ç‹¬ç«‹æŸ¥è¯¢

**å¼•ç”¨æ–‡æ¡£**ï¼š
```typescript
// User
{
  _id: ObjectId("..."),
  name: "John",
  addressId: ObjectId("...")
}

// Address
{
  _id: ObjectId("..."),
  street: "123 Main St",
  city: "New York"
}
```

ä¼˜ç‚¹ï¼š
- âœ… é¿å…æ•°æ®é‡å¤
- âœ… çµæ´»æŸ¥è¯¢
- âœ… æ— å¤§å°é™åˆ¶

ç¼ºç‚¹ï¼š
- âŒ éœ€è¦å¤šæ¬¡æŸ¥è¯¢
- âŒ æ€§èƒ½è¾ƒå·®

**é€‰æ‹©å»ºè®®**ï¼š
- ä¸€å¯¹å°‘é‡ï¼ˆ1-10ï¼‰ä¸”ä¸å˜ â†’ åµŒå…¥
- ä¸€å¯¹å¤§é‡æˆ–é¢‘ç¹å˜åŒ– â†’ å¼•ç”¨
- æ•°æ®éœ€è¦ç‹¬ç«‹è®¿é—® â†’ å¼•ç”¨
- æ•°æ®æ€»æ˜¯ä¸€èµ·è®¿é—® â†’ åµŒå…¥

### 5. ORM äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Ÿ

**å››ç§éš”ç¦»çº§åˆ«**ï¼š

| éš”ç¦»çº§åˆ« | è„è¯» | ä¸å¯é‡å¤è¯» | å¹»è¯» | æ€§èƒ½ |
|----------|------|-----------|------|------|
| Read Uncommitted | âœ“ | âœ“ | âœ“ | â­â­â­â­â­ |
| Read Committed | âœ— | âœ“ | âœ“ | â­â­â­â­ |
| Repeatable Read | âœ— | âœ— | âœ“ | â­â­â­ |
| Serializable | âœ— | âœ— | âœ— | â­â­ |

**Prisma è®¾ç½®**ï¼š
```typescript
await prisma.$transaction(
  async (tx) => {
    // ...
  },
  {
    isolationLevel: Prisma.TransactionIsolationLevel.Serializable
  }
);
```

**TypeORM è®¾ç½®**ï¼š
```typescript
await connection.transaction('SERIALIZABLE', async manager => {
  // ...
});
```

**é€‰æ‹©å»ºè®®**ï¼š
- é‡‘èäº¤æ˜“ â†’ Serializable
- æ™®é€šä¸šåŠ¡ â†’ Read Committedï¼ˆé»˜è®¤ï¼‰
- é«˜å¹¶å‘è¯» â†’ Read Uncommitted

### 6. å¦‚ä½•ä¼˜åŒ– ORM æ€§èƒ½ï¼Ÿ

**é€šç”¨ä¼˜åŒ–**ï¼š

1. **é¿å… N+1 æŸ¥è¯¢**ï¼š
   - ä½¿ç”¨é¢„åŠ è½½ï¼ˆinclude/relationsï¼‰
   - ä½¿ç”¨ DataLoader

2. **åªæŸ¥è¯¢éœ€è¦çš„å­—æ®µ**ï¼š
```typescript
// Prisma
await prisma.user.findMany({
  select: { id: true, name: true }
});

// TypeORM
await userRepository.find({
  select: ['id', 'name']
});
```

3. **æ‰¹é‡æ“ä½œ**ï¼š
```typescript
// âŒ å¾ªç¯æ’å…¥
for (const user of users) {
  await create(user);
}

// âœ… æ‰¹é‡æ’å…¥
await createMany(users);
```

4. **ä½¿ç”¨ç´¢å¼•**ï¼š
```prisma
// Prisma
model User {
  email String @unique
  
  @@index([email])
  @@index([firstName, lastName])
}
```

5. **è¿æ¥æ± é…ç½®**ï¼š
```typescript
{
  max: 20,          // æœ€å¤§è¿æ¥æ•°
  min: 5,           // æœ€å°è¿æ¥æ•°
  idle: 10000,      // ç©ºé—²è¶…æ—¶
  acquire: 30000    // è·å–è¶…æ—¶
}
```

6. **ä½¿ç”¨ç¼“å­˜**ï¼š
```typescript
// TypeORM
await userRepository.find({
  cache: true
});
```

7. **åˆ†é¡µæŸ¥è¯¢**ï¼š
```typescript
// æ¸¸æ ‡åˆ†é¡µï¼ˆæ›´é«˜æ•ˆï¼‰
await prisma.post.findMany({
  take: 20,
  cursor: { id: lastPostId },
  skip: 1
});
```

### 7. ORM è¿ç§»æœ€ä½³å®è·µï¼Ÿ

**å¼€å‘ç¯å¢ƒ**ï¼š
```bash
# Prisma
npx prisma migrate dev

# TypeORM
npx typeorm migration:generate -n Migration
npx typeorm migration:run
```

**ç”Ÿäº§ç¯å¢ƒ**ï¼š
```bash
# Prisma
npx prisma migrate deploy

# TypeORM
npx typeorm migration:run
```

**æœ€ä½³å®è·µ**ï¼š
1. âœ… å§‹ç»ˆä½¿ç”¨è¿ç§»ç®¡ç†æ•°æ®åº“
2. âœ… æ¯æ¬¡è¿ç§»åªåšä¸€ä»¶äº‹
3. âœ… è¿ç§»æ–‡ä»¶åŠ å…¥ç‰ˆæœ¬æ§åˆ¶
4. âœ… ç”Ÿäº§ç¯å¢ƒç¦ç”¨è‡ªåŠ¨åŒæ­¥
5. âœ… è¿ç§»å‰å¤‡ä»½æ•°æ®åº“
6. âœ… æä¾›å›æ»šè„šæœ¬
7. âœ… åœ¨stagingç¯å¢ƒå…ˆæµ‹è¯•
8. âŒ é¿å…åˆ é™¤åˆ—ï¼ˆå¯æ ‡è®°åºŸå¼ƒï¼‰
9. âŒ é¿å…åœ¨ç”Ÿäº§ç¯å¢ƒæ‰‹åŠ¨ä¿®æ”¹

## ğŸ“ å­¦ä¹ å»ºè®®

### åŸºç¡€é˜¶æ®µ
1. é€‰æ‹©ä¸€ä¸ª ORM æ·±å…¥å­¦ä¹ ï¼ˆæ¨è Prismaï¼‰
2. æŒæ¡åŸºç¡€ CRUD æ“ä½œ
3. ç†è§£å…³ç³»æ˜ å°„
4. å­¦ä¹ è¿ç§»ç³»ç»Ÿ

### è¿›é˜¶é˜¶æ®µ
1. æ·±å…¥æŸ¥è¯¢ä¼˜åŒ–
2. å­¦ä¹ äº‹åŠ¡å¤„ç†
3. äº†è§£å¤šä¸ª ORM çš„ä¼˜åŠ£
4. å®è·µæ€§èƒ½ä¼˜åŒ–

### å®æˆ˜é˜¶æ®µ
1. åœ¨é¡¹ç›®ä¸­åº”ç”¨ ORM
2. è§£å†³ N+1 æŸ¥è¯¢é—®é¢˜
3. ä¼˜åŒ–æ…¢æŸ¥è¯¢
4. å¤„ç†å¤æ‚å…³ç³»

### é¢è¯•å‡†å¤‡
1. ç†Ÿè®° ORM ä¼˜ç¼ºç‚¹
2. å‡†å¤‡æ€§èƒ½ä¼˜åŒ–æ¡ˆä¾‹
3. ç†è§£ä¸åŒ ORM çš„é€‰å‹ä¾æ®
4. æŒæ¡å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ

## âœ… æ£€æŸ¥æ¸…å•

å®Œæˆä»¥ä¸‹å†…å®¹åï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š

- [ ] ç†Ÿç»ƒä½¿ç”¨è‡³å°‘ä¸€ä¸ª ORM
- [ ] ç†è§£ ORM ä¼˜ç¼ºç‚¹
- [ ] è§£å†³ N+1 æŸ¥è¯¢é—®é¢˜
- [ ] ä¼˜åŒ– ORM æ€§èƒ½
- [ ] å¤„ç†å¤æ‚å…³ç³»æ˜ å°„
- [ ] ç®¡ç†æ•°æ®åº“è¿ç§»
- [ ] ä½¿ç”¨äº‹åŠ¡ä¿è¯ä¸€è‡´æ€§
- [ ] å¯¹æ¯”ä¸åŒ ORM çš„ç‰¹ç‚¹
- [ ] æ ¹æ®åœºæ™¯é€‰æ‹©åˆé€‚çš„ ORM
- [ ] å›ç­”å¸¸è§é¢è¯•é—®é¢˜

## ğŸ”— ç›¸å…³èµ„æº

### Prisma
- [Prisma å®˜æ–¹æ–‡æ¡£](https://www.prisma.io/docs/)
- [Prisma GitHub](https://github.com/prisma/prisma)
- [Prisma Examples](https://github.com/prisma/prisma-examples)

### TypeORM
- [TypeORM å®˜æ–¹æ–‡æ¡£](https://typeorm.io/)
- [TypeORM GitHub](https://github.com/typeorm/typeorm)

### Mongoose
- [Mongoose å®˜æ–¹æ–‡æ¡£](https://mongoosejs.com/docs/)
- [Mongoose GitHub](https://github.com/Automattic/mongoose)

### Drizzle
- [Drizzle å®˜æ–¹æ–‡æ¡£](https://orm.drizzle.team/)
- [Drizzle GitHub](https://github.com/drizzle-team/drizzle-orm)

## ğŸ“ é¢è¯•è¯„åˆ†æ ‡å‡†

### åˆçº§ï¼ˆ0-2 å¹´ï¼‰
- ä¼šä½¿ç”¨ä¸€ä¸ª ORM
- ç†è§£åŸºç¡€ CRUD
- çŸ¥é“å¦‚ä½•å®šä¹‰å…³ç³»
- äº†è§£è¿ç§»æ¦‚å¿µ

### ä¸­çº§ï¼ˆ2-4 å¹´ï¼‰
- ç†Ÿç»ƒä½¿ç”¨ 2+ ORM
- èƒ½è§£å†³ N+1 é—®é¢˜
- æŒæ¡æ€§èƒ½ä¼˜åŒ–æŠ€å·§
- ç†è§£äº‹åŠ¡å’Œéš”ç¦»çº§åˆ«
- äº†è§£ä¸åŒ ORM çš„ä¼˜åŠ£

### é«˜çº§ï¼ˆ4+ å¹´ï¼‰
- ç²¾é€šå¤šä¸ª ORM åº•å±‚åŸç†
- èƒ½ä»ä¸šåŠ¡è§’åº¦é€‰å‹
- æœ‰å¤§è§„æ¨¡é¡¹ç›®ä¼˜åŒ–ç»éªŒ
- èƒ½è§£å†³å¤æ‚çš„æ•°æ®æ¨¡å‹é—®é¢˜
- å¯¹ ORM æ€§èƒ½æœ‰æ·±å…¥ç†è§£

---

**ä¸‹ä¸€æ¨¡å—**: [07-api-designï¼ˆAPI è®¾è®¡ï¼‰](../07-api-design/README.md)
