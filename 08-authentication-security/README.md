# è®¤è¯ä¸å®‰å…¨

è®¤è¯ä¸å®‰å…¨æ˜¯åç«¯å¼€å‘çš„æ ¸å¿ƒæŠ€èƒ½ã€‚æœ¬æ¨¡å—æ·±å…¥è®²è§£è®¤è¯æœºåˆ¶ã€æˆæƒæ¨¡å‹ã€Web å®‰å…¨å’Œ Node.js å®‰å…¨å®è·µã€‚

## ğŸ“š å­¦ä¹ æ–‡æ¡£

### âœ… å·²å®Œæˆ

1. **[è®¤è¯æœºåˆ¶](./01-authentication.md)** (43KB)
   - Session vs Token vs JWT
   - OAuth 2.0 ç¤¾äº¤ç™»å½•
   - å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰
   - å¤šå› ç´ è®¤è¯ï¼ˆ2FA/TOTPï¼‰
   - Refresh Token æœºåˆ¶
   - å¯†ç å®‰å…¨ï¼ˆbcrypt/argon2ï¼‰
   - å®Œæ•´çš„ TypeScript/Node.js å®ç°
   - 5+ é“é«˜é¢‘é¢è¯•é¢˜

2. **[æˆæƒæœºåˆ¶](./02-authorization.md)** (45KB)
   - RBACï¼ˆåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰
   - ABACï¼ˆåŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶ï¼‰
   - æƒé™è®¾è®¡æ¨¡å¼ï¼ˆå±‚æ¬¡è§’è‰²ã€èµ„æºæ‰€æœ‰æƒï¼‰
   - æ•°æ®çº§æƒé™ï¼ˆè¡Œçº§å®‰å…¨ï¼‰
   - NestJS Guards å®ç°
   - CASL æƒé™åº“
   - Prisma ä¸­é—´ä»¶å®ç° RLS
   - 5+ é“é«˜é¢‘é¢è¯•é¢˜

3. **[Web å®‰å…¨](./03-web-security.md)** (48KB)
   - OWASP Top 10 (2021)
   - æ³¨å…¥æ”»å‡»é˜²æŠ¤ï¼ˆSQL/NoSQL/å‘½ä»¤æ³¨å…¥ï¼‰
   - XSS è·¨ç«™è„šæœ¬é˜²æŠ¤ï¼ˆåå°„å‹/å­˜å‚¨å‹/DOMå‹ï¼‰
   - CSRF è·¨ç«™è¯·æ±‚ä¼ªé€ é˜²æŠ¤
   - å¯†ç å®‰å…¨ä¸ä¼šè¯ç®¡ç†
   - åŠ å¯†ä¸æ•°æ®ä¿æŠ¤ï¼ˆAES-256-GCMï¼‰
   - å®‰å…¨å“åº”å¤´ï¼ˆHelmetï¼‰
   - API å®‰å…¨ï¼ˆé€Ÿç‡é™åˆ¶ã€è¾“å…¥éªŒè¯ï¼‰
   - 5+ é“é«˜é¢‘é¢è¯•é¢˜

4. **[å®‰å…¨å®è·µ](./04-security-practices.md)** (48KB)
   - ä¾èµ–å®‰å…¨ï¼ˆnpm auditã€Snykï¼‰
   - ç¯å¢ƒé…ç½®ï¼ˆ.envã€å¯†é’¥ç®¡ç†ï¼‰
   - é”™è¯¯å¤„ç†ï¼ˆä¸æš´éœ²æ•æ„Ÿä¿¡æ¯ï¼‰
   - æ—¥å¿—ä¸ç›‘æ§ï¼ˆWinstonã€Sentryï¼‰
   - æ–‡ä»¶ä¸Šä¼ å®‰å…¨ï¼ˆç±»å‹éªŒè¯ã€ç—…æ¯’æ‰«æï¼‰
   - API å®‰å…¨ï¼ˆCORSã€ç‰ˆæœ¬æ§åˆ¶ï¼‰
   - Docker å®‰å…¨ï¼ˆé•œåƒæ‰«æã€é root ç”¨æˆ·ï¼‰
   - å®‰å…¨æµ‹è¯•ï¼ˆå•å…ƒæµ‹è¯•ã€æ¸—é€æµ‹è¯•ï¼‰
   - 5+ é“é«˜é¢‘é¢è¯•é¢˜

## ğŸ“ çŸ¥è¯†ç‚¹æ¸…å•

### è®¤è¯æœºåˆ¶
- [x] Session è®¤è¯
- [x] Token è®¤è¯
- [x] JWT è®¤è¯
- [x] Refresh Token æœºåˆ¶
- [x] OAuth 2.0
- [x] å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰
- [x] å¤šå› ç´ è®¤è¯ï¼ˆ2FAï¼‰
- [x] å¯†ç å“ˆå¸Œï¼ˆbcrypt/argon2ï¼‰
- [x] è´¦æˆ·é”å®šæœºåˆ¶
- [x] ç™»å½•é™æµ

### æˆæƒæœºåˆ¶
- [x] RBACï¼ˆåŸºäºè§’è‰²ï¼‰
- [x] ABACï¼ˆåŸºäºå±æ€§ï¼‰
- [x] æƒé™è®¾è®¡æ¨¡å¼
- [x] æ•°æ®çº§æƒé™
- [x] NestJS Guards
- [x] CASL æƒé™åº“
- [x] æƒé™ç¼“å­˜
- [x] å®¡è®¡æ—¥å¿—

### Web å®‰å…¨
- [x] OWASP Top 10
- [x] SQL æ³¨å…¥é˜²æŠ¤
- [x] NoSQL æ³¨å…¥é˜²æŠ¤
- [x] XSS é˜²æŠ¤
- [x] CSRF é˜²æŠ¤
- [x] å®‰å…¨å“åº”å¤´
- [x] åŠ å¯†ä¸ HTTPS
- [x] é€Ÿç‡é™åˆ¶
- [x] è¾“å…¥éªŒè¯

### å®‰å…¨å®è·µ
- [x] ä¾èµ–æ‰«æ
- [x] ç¯å¢ƒå˜é‡ç®¡ç†
- [x] é”™è¯¯å¤„ç†
- [x] æ—¥å¿—ç›‘æ§
- [x] æ–‡ä»¶ä¸Šä¼ å®‰å…¨
- [x] CORS é…ç½®
- [x] Docker å®‰å…¨
- [x] å®‰å…¨æµ‹è¯•

## ğŸ¯ å­¦ä¹ å»ºè®®

### åŸºç¡€é˜¶æ®µï¼ˆå¿…ä¿®ï¼‰
1. ç†è§£è®¤è¯ä¸æˆæƒçš„åŒºåˆ«
2. æŒæ¡ JWT è®¤è¯æœºåˆ¶
3. ç†è§£ RBAC æƒé™æ¨¡å‹
4. å­¦ä¹  OWASP Top 10
5. æŒæ¡è¾“å…¥éªŒè¯å’Œå‚æ•°åŒ–æŸ¥è¯¢

### è¿›é˜¶é˜¶æ®µï¼ˆæ·±å…¥ï¼‰
1. å®ç° OAuth 2.0 ç™»å½•
2. å®ç° 2FA å¤šå› ç´ è®¤è¯
3. æŒæ¡ ABAC æƒé™æ¨¡å‹
4. æ·±å…¥ç†è§£ XSS å’Œ CSRF
5. æŒæ¡åŠ å¯†ç®—æ³•ï¼ˆAESã€RSAï¼‰

### å®æˆ˜é˜¶æ®µï¼ˆåº”ç”¨ï¼‰
1. è®¾è®¡å®Œæ•´çš„è®¤è¯æˆæƒç³»ç»Ÿ
2. å®æ–½ OWASP Top 10 é˜²æŠ¤
3. é…ç½®å®‰å…¨çš„ç”Ÿäº§ç¯å¢ƒ
4. å®æ–½æ—¥å¿—ç›‘æ§å’Œå‘Šè­¦
5. è¿›è¡Œå®‰å…¨æµ‹è¯•å’Œæ¸—é€æµ‹è¯•

## ğŸ’¡ é‡ç‚¹éš¾ç‚¹

### å¿…é¡»æŒæ¡ â­â­â­
- JWT vs Session é€‰æ‹©
- RBAC å®ç°
- SQL æ³¨å…¥é˜²æŠ¤
- XSS é˜²æŠ¤
- CSRF é˜²æŠ¤
- å¯†ç å®‰å…¨å­˜å‚¨
- HTTPS é…ç½®
- è¾“å…¥éªŒè¯

### é«˜çº§ä¸»é¢˜ â­â­
- OAuth 2.0 æµç¨‹
- 2FA å®ç°
- ABAC ç­–ç•¥å¼•æ“
- æ•°æ®çº§æƒé™
- åŠ å¯†ç®—æ³•
- å®‰å…¨å“åº”å¤´
- ä¾èµ–å®‰å…¨ç®¡ç†

### å®æˆ˜æŠ€èƒ½ â­â­â­
- å®Œæ•´è®¤è¯ç³»ç»Ÿè®¾è®¡
- æƒé™ç³»ç»Ÿè®¾è®¡
- å®‰å…¨é…ç½®
- æ—¥å¿—ç›‘æ§
- å®‰å…¨æµ‹è¯•

## ğŸ”¥ å¸¸è§é¢è¯•é¢˜

### è®¤è¯ç›¸å…³

1. **Session vs JWTï¼Œå¦‚ä½•é€‰æ‹©ï¼Ÿ**
   - Sessionï¼šä¼ ç»Ÿ Webã€éœ€è¦ç«‹å³æ’¤é”€
   - JWTï¼šSPA/ç§»åŠ¨åº”ç”¨ã€åˆ†å¸ƒå¼ç³»ç»Ÿ
   - æ··åˆæ–¹æ¡ˆï¼šJWT + Refresh Token

2. **JWT å¦‚ä½•æ’¤é”€ï¼Ÿ**
   - é»‘åå•ï¼ˆRedisï¼‰
   - Token ç‰ˆæœ¬å·
   - Refresh Token æ§åˆ¶

3. **OAuth 2.0 çš„ä¼˜åŠ¿ï¼Ÿ**
   - æ— éœ€åˆ›å»ºæ–°å¯†ç 
   - å®‰å…¨ï¼ˆä¸æš´éœ²ç”¨æˆ·å¯†ç ï¼‰
   - ç”¨æˆ·ä½“éªŒå¥½

4. **2FA çš„åŸç†ï¼Ÿ**
   - TOTPï¼šåŸºäºæ—¶é—´çš„ä¸€æ¬¡æ€§å¯†ç 
   - æ¯ 30 ç§’ç”Ÿæˆæ–°çš„ 6 ä½æ•°å­—
   - æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯å…±äº«å¯†é’¥

### æˆæƒç›¸å…³

1. **RBAC vs ABACï¼Ÿ**
   - RBACï¼šåŸºäºè§’è‰²ï¼Œç®€å•æ˜“å®ç°
   - ABACï¼šåŸºäºå±æ€§ï¼Œçµæ´»ä½†å¤æ‚

2. **å¦‚ä½•è®¾è®¡æƒé™ç³»ç»Ÿï¼Ÿ**
   - ç”¨æˆ· â†’ è§’è‰² â†’ æƒé™ â†’ èµ„æº
   - æ”¯æŒè§’è‰²ç»§æ‰¿
   - æƒé™ç¼“å­˜
   - å®¡è®¡æ—¥å¿—

3. **æ•°æ®çº§æƒé™å¦‚ä½•å®ç°ï¼Ÿ**
   - æŸ¥è¯¢è¿‡æ»¤
   - ORM ä¸­é—´ä»¶
   - æ•°æ®åº“ RLS

### å®‰å…¨ç›¸å…³

1. **å¦‚ä½•é˜²æ­¢ SQL æ³¨å…¥ï¼Ÿ**
   - å‚æ•°åŒ–æŸ¥è¯¢
   - ä½¿ç”¨ ORM
   - è¾“å…¥éªŒè¯
   - æœ€å°æƒé™

2. **XSS vs CSRFï¼Ÿ**
   - XSSï¼šæ³¨å…¥æ¶æ„è„šæœ¬ï¼Œçªƒå–æ•°æ®
   - CSRFï¼šä¼ªé€ è¯·æ±‚ï¼Œæ‰§è¡Œæ“ä½œ

3. **å¦‚ä½•å®‰å…¨å­˜å‚¨å¯†ç ï¼Ÿ**
   - ä½¿ç”¨ bcrypt/argon2
   - åŠ ç›ï¼ˆæ¯ä¸ªå¯†ç å”¯ä¸€ saltï¼‰
   - æ…¢å“ˆå¸Œï¼ˆé˜²æš´åŠ›ç ´è§£ï¼‰

4. **HTTPS ä¸ºä»€ä¹ˆå®‰å…¨ï¼Ÿ**
   - åŠ å¯†ä¼ è¾“ï¼ˆTLSï¼‰
   - èº«ä»½éªŒè¯ï¼ˆè¯ä¹¦ï¼‰
   - å®Œæ•´æ€§ï¼ˆé˜²ç¯¡æ”¹ï¼‰

5. **å¦‚ä½•é˜²æ­¢æš´åŠ›ç ´è§£ï¼Ÿ**
   - é€Ÿç‡é™åˆ¶
   - éªŒè¯ç 
   - è´¦æˆ·é”å®š
   - æ…¢å“ˆå¸Œ
   - 2FA

### å®è·µç›¸å…³

1. **ç”Ÿäº§ç¯å¢ƒå®‰å…¨æ£€æŸ¥æ¸…å•ï¼Ÿ**
   - HTTPSã€å®‰å…¨å“åº”å¤´ã€é€Ÿç‡é™åˆ¶
   - è¾“å…¥éªŒè¯ã€å‚æ•°åŒ–æŸ¥è¯¢
   - åŠ å¯†æ•æ„Ÿæ•°æ®ã€å®šæœŸæ›´æ–°ä¾èµ–
   - æ—¥å¿—ç›‘æ§ã€é”™è¯¯ä¸æš´éœ²è¯¦æƒ…

2. **å¦‚ä½•æ£€æµ‹å®‰å…¨äº‹ä»¶ï¼Ÿ**
   - æ—¥å¿—è®°å½•
   - å®æ—¶ç›‘æ§ï¼ˆSentryï¼‰
   - å¼‚å¸¸æ£€æµ‹
   - å‘Šè­¦æœºåˆ¶

3. **Docker å®¹å™¨å®‰å…¨ï¼Ÿ**
   - ä½¿ç”¨å®˜æ–¹é•œåƒ
   - é root ç”¨æˆ·
   - æ‰«ææ¼æ´
   - èµ„æºé™åˆ¶
   - åªè¯»æ–‡ä»¶ç³»ç»Ÿ

## ğŸ“Š å†…å®¹ç»Ÿè®¡

- **4 ä¸ªæ ¸å¿ƒä¸»é¢˜**
- **184KB+ è¯¦ç»†å†…å®¹**
- **100+ ä¸ªä»£ç ç¤ºä¾‹**
- **20+ é“é«˜é¢‘é¢è¯•é¢˜**
- **å®Œæ•´çš„å®æˆ˜æ¡ˆä¾‹**

## ğŸ“ æŠ€æœ¯é€‰å‹å»ºè®®

### è®¤è¯æ–¹æ¡ˆ

| åœºæ™¯ | æ¨èæ–¹æ¡ˆ | ç†ç”± |
|------|---------|------|
| **ä¼ ç»Ÿ Web** | Session + Redis | æœåŠ¡å™¨æ§åˆ¶ï¼Œæ˜“æ’¤é”€ |
| **SPA/ç§»åŠ¨** | JWT + Refresh Token | æ— çŠ¶æ€ï¼Œæ˜“æ‰©å±• |
| **ç¤¾äº¤ç™»å½•** | OAuth 2.0 | ç”¨æˆ·ä½“éªŒå¥½ |
| **ä¼ä¸šåº”ç”¨** | SSOï¼ˆSAML/OIDCï¼‰ | å•ç‚¹ç™»å½• |
| **é«˜å®‰å…¨** | JWT + 2FA | å¤šå±‚é˜²æŠ¤ |

### æˆæƒæ–¹æ¡ˆ

| åœºæ™¯ | æ¨èæ–¹æ¡ˆ | ç†ç”± |
|------|---------|------|
| **ç®€å•åº”ç”¨** | RBAC | å®ç°ç®€å• |
| **å¤æ‚ä¸šåŠ¡** | ABAC | çµæ´»è¡¨è¾¾è§„åˆ™ |
| **ä¼ä¸šåº”ç”¨** | RBAC + æ•°æ®çº§æƒé™ | å¹³è¡¡å¤æ‚åº¦å’Œçµæ´»æ€§ |

### å®‰å…¨å·¥å…·

| å·¥å…· | ç”¨é€” | æ¨èåº¦ |
|------|------|--------|
| **Helmet** | å®‰å…¨å“åº”å¤´ | â­â­â­â­â­ |
| **express-rate-limit** | é€Ÿç‡é™åˆ¶ | â­â­â­â­â­ |
| **bcrypt/argon2** | å¯†ç å“ˆå¸Œ | â­â­â­â­â­ |
| **Snyk** | ä¾èµ–æ‰«æ | â­â­â­â­ |
| **Sentry** | é”™è¯¯ç›‘æ§ | â­â­â­â­ |
| **OWASP ZAP** | æ¸—é€æµ‹è¯• | â­â­â­â­ |

## âœ… æ£€æŸ¥æ¸…å•

å®Œæˆä»¥ä¸‹å†…å®¹åï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š

### è®¤è¯æœºåˆ¶
- [ ] å®ç° Session è®¤è¯
- [ ] å®ç° JWT è®¤è¯
- [ ] å®ç° Refresh Token
- [ ] å®ç° OAuth 2.0 ç™»å½•
- [ ] å®ç° 2FA
- [ ] å®‰å…¨å­˜å‚¨å¯†ç 
- [ ] å®æ–½ç™»å½•é™æµ
- [ ] å®ç°è´¦æˆ·é”å®š

### æˆæƒæœºåˆ¶
- [ ] è®¾è®¡ RBAC ç³»ç»Ÿ
- [ ] å®ç°æƒé™æ£€æŸ¥
- [ ] å®ç°æ•°æ®çº§æƒé™
- [ ] ä½¿ç”¨ NestJS Guards
- [ ] ç¼“å­˜æƒé™
- [ ] è®°å½•å®¡è®¡æ—¥å¿—

### Web å®‰å…¨
- [ ] é˜²æŠ¤ SQL æ³¨å…¥
- [ ] é˜²æŠ¤ XSS
- [ ] é˜²æŠ¤ CSRF
- [ ] é…ç½® HTTPS
- [ ] é…ç½®å®‰å…¨å“åº”å¤´
- [ ] å®æ–½é€Ÿç‡é™åˆ¶
- [ ] éªŒè¯æ‰€æœ‰è¾“å…¥
- [ ] åŠ å¯†æ•æ„Ÿæ•°æ®

### å®‰å…¨å®è·µ
- [ ] æ‰«æä¾èµ–æ¼æ´
- [ ] ç®¡ç†ç¯å¢ƒå˜é‡
- [ ] é…ç½®é”™è¯¯å¤„ç†
- [ ] å®æ–½æ—¥å¿—ç›‘æ§
- [ ] ä¿æŠ¤æ–‡ä»¶ä¸Šä¼ 
- [ ] é…ç½® CORS
- [ ] å®¹å™¨å®‰å…¨
- [ ] è¿›è¡Œå®‰å…¨æµ‹è¯•

## ğŸ“š æ¨èèµ„æº

### ä¹¦ç±
- ã€ŠWeb å®‰å…¨æ·±åº¦å‰–æã€‹
- ã€Šé»‘å®¢æ”»é˜²æŠ€æœ¯å®å…¸ï¼šWeb å®æˆ˜ç¯‡ã€‹
- ã€Šç™½å¸½å­è®² Web å®‰å…¨ã€‹
- ã€ŠOAuth 2 in Actionã€‹

### æ–‡æ¡£
- [OWASP Top 10](https://owasp.org/www-project-top-ten/)
- [OWASP Cheat Sheet Series](https://cheatsheetseries.owasp.org/)
- [CWE Top 25](https://cwe.mitre.org/top25/)
- [Node.js Security Best Practices](https://nodejs.org/en/docs/guides/security/)

### å·¥å…·
- [OWASP ZAP](https://www.zaproxy.org/) - æ¸—é€æµ‹è¯•
- [Burp Suite](https://portswigger.net/burp) - å®‰å…¨æµ‹è¯•
- [Snyk](https://snyk.io/) - ä¾èµ–æ‰«æ
- [npm audit](https://docs.npmjs.com/cli/v8/commands/npm-audit) - æ¼æ´æ£€æµ‹

### åœ¨çº¿å­¦ä¹ 
- [PortSwigger Web Security Academy](https://portswigger.net/web-security)
- [OWASP WebGoat](https://owasp.org/www-project-webgoat/)
- [HackTheBox](https://www.hackthebox.eu/)

## ğŸš€ ä¸‹ä¸€æ­¥

å®Œæˆæœ¬æ¨¡å—åï¼Œå»ºè®®ï¼š
1. å®ç°ä¸€ä¸ªå®Œæ•´çš„è®¤è¯æˆæƒç³»ç»Ÿ
2. é˜…è¯» OWASP Top 10 å¹¶å®æ–½é˜²æŠ¤
3. é…ç½®å®‰å…¨çš„ç”Ÿäº§ç¯å¢ƒ
4. å­¦ä¹ ä½¿ç”¨å®‰å…¨æµ‹è¯•å·¥å…·
5. å‚ä¸ CTF æ¯”èµ›æˆ– Bug Bounty
6. å­¦ä¹  API ç½‘å…³å’Œ WAF
7. æ·±å…¥å­¦ä¹ å¯†ç å­¦

## ğŸ¯ é¢è¯•è¯„åˆ†æ ‡å‡†

### åˆçº§ï¼ˆ0-2 å¹´ï¼‰
- ç†è§£è®¤è¯ä¸æˆæƒçš„åŒºåˆ«
- ä¼šä½¿ç”¨ JWT è®¤è¯
- äº†è§£å¸¸è§å®‰å…¨æ¼æ´ï¼ˆXSSã€SQL æ³¨å…¥ï¼‰
- ä¼šä½¿ç”¨ bcrypt å­˜å‚¨å¯†ç 
- äº†è§£ HTTPS

### ä¸­çº§ï¼ˆ2-4 å¹´ï¼‰
- æ·±å…¥ç†è§£ Session vs JWT
- æŒæ¡ RBAC æƒé™æ¨¡å‹
- èƒ½é˜²æŠ¤ OWASP Top 10
- å®ç° OAuth 2.0 ç™»å½•
- é…ç½®å®‰å…¨å“åº”å¤´
- å®æ–½é€Ÿç‡é™åˆ¶
- æŒæ¡åŠ å¯†åŸºç¡€

### é«˜çº§ï¼ˆ4+ å¹´ï¼‰
- ç²¾é€šå„ç§è®¤è¯æˆæƒæ–¹æ¡ˆ
- èƒ½è®¾è®¡å¤æ‚æƒé™ç³»ç»Ÿ
- æ·±å…¥ç†è§£å®‰å…¨åŸç†
- æœ‰ç”Ÿäº§ç¯å¢ƒå®‰å…¨ç»éªŒ
- èƒ½è¿›è¡Œå®‰å…¨å®¡è®¡
- èƒ½æŒ‡å¯¼å›¢é˜Ÿå®‰å…¨å®è·µ
- äº†è§£åˆè§„è¦æ±‚ï¼ˆGDPRã€PCI DSSï¼‰

## ğŸ” å®‰å…¨æ ¼è¨€

> "å®‰å…¨ä¸æ˜¯äº§å“ï¼Œè€Œæ˜¯è¿‡ç¨‹ã€‚" â€” Bruce Schneier

> "æ°¸è¿œä¸è¦ä¿¡ä»»ç”¨æˆ·è¾“å…¥ã€‚" â€” Security Best Practice

> "æœ€å¥½çš„å®‰å…¨æ˜¯å¤šå±‚é˜²å¾¡ã€‚" â€” Defense in Depth

---

**ä¸Šä¸€æ¨¡å—**ï¼š[07-api-designï¼ˆAPI è®¾è®¡ï¼‰](../07-api-design/README.md)  
**ä¸‹ä¸€æ¨¡å—**ï¼š[09-testingï¼ˆæµ‹è¯•ï¼‰](../09-testing/README.md)
